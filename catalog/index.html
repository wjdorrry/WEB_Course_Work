<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/svg+xml" href="https://cdn.discordapp.com/attachments/1246484201247871047/1375933145026662430/image.png?ex=68337d19&is=68322b99&hm=935fc672f26b582a2e8fdc11f7e4b66b19eca235962d60c9fa9b0bb638655520&" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Catalog</title>
</head>
<body>
<div id="preloader">
    <div class="loader"></div>
</div>

<header class="header">
    <widget-header></widget-header>
</header>
<main class="main">
    <div class="main-container">

        <div class="navigation-buttons">
            <button id="btnCatalog" class="nav-btn" style="position: relative;">
                <a href="../cart/index.html" class="nav-btn-link" >Корзина</a>
                <span id="cart-count-badge" class="cart-badge" style="display: none;">0</span>
            </button>
            <button id="btnFavorites" class="nav-btn" style="position: relative;"><a href="favorite/index.html" class="nav-btn-link">Избранное</a></button>
        </div>
        <p class="main-container-text">Каталог</p>

        <input type="text" id="search" placeholder="Поиск товаров">

        <div class="price-filter">
            <p class="main-container-text">Цена:</p>
            <input type="number" id="minPrice" placeholder="От" min="0" class="price-filter-category">
            <p class="minus">-</p>
            <input type="number" id="maxPrice" placeholder="До" min="0" class="price-filter-category">
        </div>

        <label for="sort"></label>
        <section>
            <select id="sort">
                <option value="default">Сортировать по</option>
                <option value="name">По имени</option>
                <option value="price">По цене</option>
                <option value="rating">По рейтингу</option>
            </select>

            <label for="sortCategory"></label>
            <select id="sortCategory">
                <option value="default">Все категории</option>
                <option value="SMM">SMM</option>
                <option value="Медиа">Медиа</option>
                <option value="Реклама">Реклама</option>
                <option value="Радио">Радио</option>
                <option value="Видео">Видео</option>
                <option value="Аудио">Аудио</option>
                <option value="PR">PR</option>
                <option value="Стриминг">Стриминг</option>
                <option value="Ивенты">Ивенты</option>
                <option value="Сети">Сети</option>
                <option value="Контент">Контент</option>
                <option value="Аналитика">Аналитика</option>
            </select>
        </section>

        <div id="categories"></div>
        <div id="catalog" class="catalog"></div>
        <div id="pagination" class="pagination"></div>

        <div id="buttons">
            <button id="reset" class="btn">Сбросить фильтры</button>
            <button id="btnFilter" class="btn">Фильтр по цене > 300</button>
            <button id="btnReduce" class="btn">Общая стоимость</button>
            <button id="btnEvery" class="btn">Все товары > 400</button>
            <button id="btnFind" class="btn">Найти первый товар > 450</button>
            <button id="btnTop3" class="btn">Топ 3 дешевых</button>
        </div>
    </div>
</main>
<footer class="footer">
    <widget-footer></widget-footer>
</footer>
<div style="position: fixed; bottom: 0; left: 0;">
    <div class="text-scale-controls">
        <button data-scale="0.8">A-</button>
        <button data-scale="1" class="active">A</button>
        <button data-scale="1.2">A+</button>
    </div>
    <div class="theme-switcher">
        <button data-theme="default" class="active">Стандарт</button>
        <button data-theme="dark">Тёмная</button>
        <button data-theme="beige">Бежевая</button>
        <button data-theme="blue">Синяя</button>
    </div>
    <button class="toggle-images-btn">Скрыть картинки</button>

</div>
<script>
    function setTextScale(scale) {
        document.documentElement.style.setProperty('--text-scale', scale);
        localStorage.setItem('textScale', scale);

        const header = document.querySelector('.header');
        if (header) {
            header.style.fontSize = `${scale}em`;
        }

        document.querySelectorAll('.catalog-item, .catalog-item *').forEach(el => {
            el.style.fontSize = `${scale}em`;
        });
    }

    document.querySelectorAll('[data-scale]').forEach(btn => {
        btn.addEventListener('click', function() {
            const scale = parseFloat(this.dataset.scale);
            setTextScale(scale);

            document.querySelectorAll('[data-scale]').forEach(b =>
                b.classList.remove('active'));
            this.classList.add('active');
        });
    });

    document.querySelectorAll('[data-theme]').forEach(btn => {
        btn.addEventListener('click', function() {
            const theme = this.dataset.theme;

            if (theme === "default") {

                document.documentElement.classList.remove(
                    'dark-theme', 'beige-theme', 'blue-theme'
                );

                document.querySelectorAll('[data-theme]').forEach(b =>
                    b.classList.remove('active'));

                localStorage.removeItem('colorTheme');
                this.classList.add('active');
                return;
            }

            document.documentElement.classList.remove(
                'dark-theme', 'beige-theme', 'blue-theme'
            );
            document.documentElement.classList.add(`${theme}-theme`);

            document.querySelectorAll('[data-theme]').forEach(b =>
                b.classList.remove('active'));
            this.classList.add('active');

            localStorage.setItem('colorTheme', theme);
        });
    });

    document.querySelectorAll('[data-theme]').forEach(btn => {
        btn.addEventListener('click', function() {
            const theme = this.dataset.theme;
            setTheme(theme);

            document.querySelectorAll('[data-theme]').forEach(b =>
                b.classList.remove('active'));
            this.classList.add('active');
        });
    });

    document.querySelector('.toggle-images-btn').addEventListener('click', function() {
        const imagesDisabled = !this.classList.toggle('active');

        if (imagesDisabled) {
            document.body.classList.add('no-images');
        } else {
            document.body.classList.remove('no-images');
        }

        document.querySelectorAll('img, svg, .icon').forEach(el => {
            if (imagesDisabled) {
                el.dataset.originalDisplay = el.style.display || '';
                el.style.display = 'none';

                if (el.alt) {
                    const desc = document.createElement('div');
                    desc.className = 'image-alt-text';
                    desc.textContent = el.alt;
                    el.parentNode.insertBefore(desc, el.nextSibling);
                }
            } else {
                el.style.display = el.dataset.originalDisplay || '';
                document.querySelectorAll('.image-alt-text').forEach(d => d.remove());
            }
        });

        localStorage.setItem('imagesDisabled', imagesDisabled);
    });

    document.addEventListener('DOMContentLoaded', () => {
        const savedScale = localStorage.getItem('textScale') || '1';
        setTextScale(savedScale);
        document.querySelector(`[data-scale="${savedScale}"]`)?.classList.add('active');

        const savedTheme = localStorage.getItem('colorTheme');
        if (savedTheme) {
            const themeBtn = document.querySelector(`[data-theme="${savedTheme}"]`);
            if (themeBtn) themeBtn.click();
        }

        if (localStorage.getItem('imagesDisabled') === 'true') {
            document.querySelector('.toggle-images-btn').classList.add('active');
            document.body.classList.add('no-images');
        }
    });
</script>
<script type="module" src="catalog-index.js"></script>
</body>
</html>